<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900|Roboto+Condensed:300,400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Permanent+Marker" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Rock+Salt" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Reenie+Beanie" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:100" rel="stylesheet">
  <link href="/examples/docs/index.css" rel="stylesheet"/>
  <title>Gruu</title>
  <script src="/examples/docs/codeExamples.js"></script>
  <script src="/gruu.js"></script>
</head>
<body>
  <section>
    <div class="title">
      <img src="/examples/docs/images/gruu2.png" />
      <span>Gruu</span>
    </div>
  </section>
  <div class="heading">
    JavaScript framework for creating dynamic content
  </div>
  <section>
    <h2>Component</h2>
    <p>
      Components are simple JavaScript objects. Gruu is highly composable.
      Using components you can describe simple and complex parts of html. Example components are given below.
      Beside there is a html code that is going to be genereted as a result of the rendering of the components.
    </p>
    <div class="code-example component-example">
      <div>
<pre>
<k>const</k> hello = <f>createComponent</f>({
  <c>_type</c>: 'span',
  <c>id</c>: 'hello-world',
  <c>textContent</c>: 'Hello World!'
})

<k>const</k> container = <f>createComponent</f>({
  <c>_type</c>: 'div',
  <c>className</c>: 'container',
  <c>children</c>: [hello, {
    <c>_type</c>: 'p',
    <c>textContent</c>: 'Hello Again :)'
  }]
})
</pre>
      </div>
      <div>
<pre>
&lt;div class="container"&gt;
    &lt;span id="hello-world"&gt;
        Hello World!
    &lt;/span&gt;
    &lt;p&gt;
        Hello Again :)
    &lt;/p&gt;
&lt;/div&gt;
</pre>
      </div>
    </div>
    <p>
      Component container is a div with a class "container". It contains component hello which is
      a span with id "hello-world" and content "Hello World!". Component container also contains a component which is
      a paragraph with text "Hello Again :)".
    </p>
    <p>
      As you may have noticed a tag name is passed to componentes as a property _type. There are a few
      kinds of properties that components can have:
    </p>
    <div>
      <h4>_type</h4>
      <p>
        Tag name. The only exception is _type: "text" which renders plain text instead of
        a html tag. Plain text can also be achieved by passing a simple string as a component.
        It will be parsed into {&nbsp;_type:&nbsp;"text",&nbsp;textContent:&nbsp;someText&nbsp;}.
        Any property starting with "_" is a property for Gruu internal usage.
      </p>
    </div>
    <div>
      <h4>children</h4>
      <p>
        Array of components that are going to be rendered inside the given component.
      </p>
    </div>
    <div>
      <h4>state</h4>
      <p>
        Internal state of the component.
      </p>
    </div>
    <div>
      <h4>*properties starting with $</h4>
      <p>
        Properties that are calculated dynamically. See more in section Subscriptions.
      </p>
    </div>
    <div>
      <h4>*other properties</h4>
      <p>
        Properties like innerHTML, textContent, className etc. are going to be assigned to the HTML Element.
      </p>
    </div>
    </section>
    <section>
        <h2>DOM vs Phantom Components</h2>
        <p>
            There are two kinds of components: <b>DOM Components</b> and <b>Phantom Components</b>.
            All component that don't have _type property are Phantom.
        </p>
        <div class="dom-vs-phantom">
            <div>
                <span>DOM Components</span>
                <p>They have their representaion in the HTML DOM.</p>
<pre>
<k>const</k> hello = <f>createComponent</f>({
  <c>_type</c>: 'div',
  <c>textContent</c>: 'Hello World!'
})
</pre>
            </div>
            <div>
                <span>Phantom Components</span>
                <p>They exist in Gruu Virtual DOM, but are transparent for the HTML DOM.</p>
<pre>
<k>const</k> phantom = <f>createComponent</f>({
  // no _type property
  children: [{
    <c>_type</c>: 'div',
    <c>textContent</c>: 'Inside phantom!'
  }]
})
</pre>
            </div>
        </div>
        <p>
            Phantom Components are transparent for the HTML DOM meaning that its children HTML Elements
            are going to be appended to the closest parent (HTML Element) that is a DOM Component.
            Using DOM and Phantom Component allows to build complex HTML structures consisting of many elements.
        </p>
    </section>
    <section>
        <h2>Changing properties</h2>
        <p>
            You can manually change all properties of components except those starting with "_".
            The changes will be automatically applied to the HTML Elements. Changing properties that starts with "_" Gruu
            handles internally and automatically.
        </p>
        <div class="code-example">
            <div>
<pre>
<k>const</k> counter = <f>createComponent</f>({
  <c>_type</c>: 'div',
  <c>textContent</c>: 10
})

<k>const</k> button = (text, diff) => (
  <f>createComponent</f>({
    <c>_type</c>: 'button',
    <c>className</c>: 'button',
    <c>textContent</c>: text,
    <c>onclick</c> () {
      counter<c>.textContent</c> += diff
    }
  })
)

<k>const</k> buttonInc = <f>button</f>('+', 1)
<k>const</k> buttonDec = <f>button</f>('-', -1)

<k>const</k> app = <f>createComponent</f>({
  <c>_type</c>: 'div',
  <c>className</c>: 'app',
  <c>children</c>: [
    'Counter',
    {
      <c>_type</c>: 'div',
      <c>children</c>: [
        buttonDec,
        counter,
        buttonInc
      ]
    }
  ]
})
</pre>
            </div>
            <div class="counter-app"></div>
        </div>
        <p>
            Each time you click a button the textContent is going to be changed by value of diff variable
            (1 or -1). Function button is a factory that creates both buttonInc and buttonDec.
        </p>
    </section>
    <section>
        <h2>State</h2>
        <p>
            Components can have internal state. Under a property state you can store any data and help functions.
            Components can even only consist of state. They can be some kinds of stores that are used by other components.
            The usage of state in components is presented in the next section.
        </p>
    </section>
    <section>
        <h2>Subscriptions</h2>
        <p>
            Subscriptions are links between components. They automatically update dynamic properties.
            When you use a property X of a component A to generate a property Y in a component B,
            Gruu will internally connect components A and B with property relation X&nbsp=>&nbspY.
            It even works with nested properties e.g. Z.X&nbsp=>&nbspY
        </p>
        <div class="code-example subscriptions-example">
<pre>
const A = createComponent({
  _type: 'div',
  state: {
    text: 'state of A'
  }
})
</pre>
<pre>
const B = createComponent({
  _type: 'span',
  $textContent: () => A.state.text
})
</pre>
        </div>
        <p>
            Whenever the property A.state.text changes, the property textContent of the component B
            is going to be updated.
        </p>
        <div>
            <p>
                Value of every property starting with "$" should be a function which returns a value that is
                going to be assigned to the property named by removing the "$" character e.g.
            </p>
            <ul>
                <li>$textContent&nbsp=>&nbsptextContent</li>
                <li>$className&nbsp=>&nbspclassName</li>
                <li>$children&nbsp=>&nbspchildren</li>
                <li>etc</li>
            </ul>
        </div>
        <p>
            The example below shows a TODO app. Components store and todo are connected with properties
            relation state.todo&nbsp=>&nbspchildren. Every time the ADD button is clicked, the value of input is pushed to
            the store.state.todo array. Then it triggers todo.children rerender.
        </p>
        <div class="code-example">
            <div>
<pre>
<k>const</k> store = <f>createComponent</f>({
  <c>state</c>: {
    <c>todo</c>: ['buy milk', 'walk the dog']
  }
})

<k>const</k> input = <f>createComponent</f>({
  <c>_type</c>: 'input',
  <c>oninput</c> (e) {
    this<c>.value</c> = e<c>.currentTarget.value</c>
  }
})

<k>const</k> addButton = <f>createComponent</f>({
  <c>_type</c>: 'button',
  <c>textContent</c>: 'ADD',
  <c>onclick</c> () {
    store<c>.state.todo.push</c>(input.value)
    input<c>.value</c> = ''
  }
})

<k>const</k> todo = <f>createComponent</f>({
  <c>_type</c>: 'ul',
  <c>$children</c>: () => store<c>.state.todo</c>
    .map((item, index) => ({
      <c>_type</c>: 'li',
      <c>textContent</c>: item,
      <c>onclick</c> () {
        store<c>.state.todo</c> = [
          ...store<c>.state.todo.slice</c>(0, index),
          ...store<c>.state.todo.slice</c>(index + 1)
        ]
      }
    }))
})

<k>const</k> todoApp = <f>createComponent</f>({
  <c>_type</c>: 'div',
  <c>children</c>: [input, addButton, todo]
})
</pre>
          </div>
        <div class="todo-app"></div>
    </div>
  </section>
  <section>
    <h2>Rendering</h2>
    <p>
      In order to render app written in Gruu you have to execute a function renderApp which takes a node where components
      will be rendered and array of components to render.
    </p>
    <pre>
const todoContainer = document.querySelector('.todo-app')
renderApp(todoContainer, [todoApp])
    </pre>
  </section>
  <section>
    <h2>Widgets</h2>
    <p>
      Gruu is capable of creating full Single Page Applications. However it can be also used to create
      standalone widgets that are as easy to import as copy & paste :) Actually the main goal of Gruu was to
      provide a tool to create html content that changes dynamically.
    </p>
  </section>
  <section>
    <h2>Routing</h2>
    <p>Coming soon!</p>
  </section>
  <footer>
    © 2017 Marek Łabuz
  </footer>
  <script src="/examples/docs/index.js"></script>
  <script src="/examples/docs/scripts/counterApp.js"></script>
  <script src="/examples/docs/scripts/todoApp.js"></script>
</body>
</html>
